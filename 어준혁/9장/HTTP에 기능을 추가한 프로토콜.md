# [6주차] 9장. HTTP에 기능을 추가한 프로토콜

---

## HTTP를 기본으로 하는 프로토콜

- 시대를 거치면서 웹의 용도가 크게 변화함에 따라 HTTP 프로톨콜의 제한이나 한계가 발생

---

## HTTP의 병목 현상을 해소하는 SPDY

- HTTP의 병목 현상을 해소하고 웹 페이지 로딩 시간을 50% 단축한다는 목표를 세우고 개발되고 있다.

### HTTP의 병목 현상

1. 1개의 커넥션으로 1개의 리퀘스트만 보낼 수 있다.
2. 리퀘스트는 클라이언트에서만 시작할 수 있다. 리스폰스만 받는 것은 불가능하다.
3. 리퀘스트/리스폰스 헤더를 압축하지 않은 채로 보낸다. 헤더의 정보가 많을수록 지연이 심해진다.
4. 장황한 헤더를 보낸다. 매번 같은 헤더를 보내는 것은 낭비다.
5. 데이터 압축을 임의로 선택할 수 있다. 압축해서 보내는 것이 강제적이지는 않다.

#### 해결방법

1. Ajax에 의한 해결 방법

- JavaScript나 DOM 조작등을 활용하는 방식으로, 웹 페이지의 일부분만 고쳐쓸 수 있는 비동기 통신 방법이다.
- 기존의 동기식 통신에 비해서 페이지의 일부분만을 갱신되기 때문에 리스폰스로 전송되는 데이터 양은 줄어든다는 장점이 있다.
- XMLHttpRequest라는 API로 JavaScript 등의 스크립트 언어로 서버와 HTTP 통신을 할 수 있다.
- Ajax를 사용해서 실시간으로 서버에서 정보를 취득하려고 하면 대량의 리퀘스트가 발생한다는 문제가 있다.

2. Comet에 의한 해결 방법

- 서버 측의 콘텐츠에 갱신이 있었을 경우, 클라이언트부터 리퀘스트를 기다리지 않고 클라이언트에 보내기 위한 방법
- 리퀘스트가 오면 리스폰스를 보류 상태로 해 두고, 서버의 콘텐츠가 갱신되었을 때에 리스폰스를 반환한다.
- 콘텐츠를 실시간으로 갱신할 수는 잇지만 리스폰스를 보류하기 위해서 커넥션을 유지하는 시간이 길어져 유지하는 동안은 리소스를 소비한다.

#### SPDY의 설계와 기능

- SPDY는 HTTP를 완전히 바꿔 놓는 것이 아니라 TCP/IP의 애플리케이션 계층과 트랜스포트 계층 사이에 새로운 세션 계층을 추가하는 형태로 동작한다. 또한, 보안을 위해서 SSL을 사용하도록 되어 있다.

- SPDY를 사용할 때 HTTP에 추가할 수 있는 기능

1. 다중화 스트림
2. 리퀘스트의 우선 순위 부여
3. HTTP 헤더 압축
4. 서버 푸시 기능
5. 서버 힌트 기능

---

## 브라우저에서 양방향 통신을 하는 WebSocket

### WebSocket의 설계와 기능

- 웹 브라우저와 웹 서버를 위한 양방향 통신 규격으로 WebSocket 프로토콜 IETF가 책정하고 WebSocket API를 W3C가 책정하고 있다.
- 주로 Ajax나 Comet에서 사용하는 XMLHttpRequest의 결점을 해결하기 위한 기술로서 개발이 진행되고 있다.

### WebSocket 프로토콜

- WebSocket은 웹 서버와 클라이언트가 한번 접속을 확립하면 그 뒤의 통신을 모두 전용 프로토콜로 하는 방식으로 JSON이나 XML, HTML이나 이미지 등 임의 형식의 데이터를 보내게 된다.
- 한 번 접속을 확립하면 WebSocket을 사용하여 서버와 클라이언트 어느 쪽에서도 송신을 할 수 있게 됩니다.
- 주요 특징

1. 서버 푸시 기능
2. 통신량의 삭감
   - 핸드쉐이크/리퀘스트: WebSocket통신을 하려면 HTTP의 Upgrade 헤더 필드를 사용해서 프로토콜을 변경하는 것으로 핸드쉐이크를 실시한다.
   - 핸드쉐이크/리스폰스: 상태 코드 [101 Switching Protocol] 로 반환된다.
   - WebSocket API: JavaScript에서 WebSocket 프로토콜을 사용한 양방향 통신을 하기 위해서는 W3C에서 사양이 책정되어 있는 [The WebSocket API...]에서 제공되고 있는 webSocket 인터페이스를 사용한다.

---

## 등장이 기다려지는 HTTP/2.0

- 현재 주류인 HTTP/1.1은 공개된지 오래되었다.
- SPDY나 WebSocket 등의 등장에서 보듯이 이미 HTTP/1.1은 현재 웹에 적합한 프로토콜이라고는 할 수 없다.

### HTTP/2.0의 특징

- 사용자가 웹을 이용할 때의 체감 속도의 개선을 목표로 하고 있다.
- 다음의 프로토콜이 베이스가 되어 사양이 검토되고 있다.
  - SPDY
  - HTTP Speed+Modify
  - Network-Friendly HTTP Upgrade

### HTTP/2.0에서 논의되는 7가지 기술

---

## 웹 서버 상의 파일을 관리하는 WebDAV

- WebDAV는 웹 서버의 콘텐츠에 대해서, 직접 파일 복사나 편집 작업 등을 할 수 있는 분산 파일 시스템으로 HTTP/1.1을 확장한 프로토콜로 RFC4918로서 정의되어 있다.
